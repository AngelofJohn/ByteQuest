# Dev Log #002 - Quests & NPCs

**Date:** November 30, 2025
**Version:** 0.2.0
**Session Type:** Feature Development (Backfilled)

---

## Major Milestone: The Game Has Characters

The world came alive today. NPCs you can talk to. Quests you can accept. This is when it started feeling like a real game.

---

## What Was Built

### Quest System (questSystem.js)
A full quest engine supporting:
- **Quest types:** vocabulary lessons, grammar lessons, collection, delivery, timed
- **Prerequisites:** Quests can require other quests to be completed first
- **Quest chains:** Multi-part storylines
- **Objectives:** Track progress on multi-step quests
- **Rewards:** XP, gold, items, reputation

### NPC System
- NPCs with dialogue trees
- Quest givers marked visually
- Interaction flow: Click NPC → See dialogue → Accept/decline quest
- NPCs tied to locations

### Dawnmere NPCs Created
| NPC | Role | Quests |
|-----|------|--------|
| Elder Miriam | Village leader | Welcome quest, main storyline |
| Marcel | Farmer | Family vocabulary |
| Elise | Baker | Food vocabulary, Festival Feast |
| Henri | Blacksmith | Equipment, crafting intro |
| Sage Aldric | Grammar teacher | Grammar lessons (appears later) |

### First Quests
- **"Welcome to Dawnmere"** - Introduction quest
- **"Meeting the Family"** - Learn family vocabulary (la mère, le père, etc.)
- **"Baker's Dozen"** - Food vocabulary
- **"Festival Feast"** - Timed collection quest

---

## The Quest Data Structure

```javascript
{
  id: "meeting_family",
  name: "Meeting the Family",
  giver: "marcel",
  location: "dawnmere",
  type: "vocabulary",
  prerequisites: ["welcome_to_dawnmere"],

  description: "Marcel wants to introduce you to his family...",

  objectives: [
    { id: "learn_family", type: "vocabulary_lesson", target: null }
  ],

  dialogue: {
    intro: "Bonjour! Let me tell you about my family...",
    progress: "How is the learning going?",
    complete: "Magnifique! You've learned so much!"
  },

  rewards: {
    xp: 50,
    gold: 10,
    items: [],
    reputation: { dawnmere: 25 }
  }
}
```

### Why This Structure?
- **Flexible objective types** - Can mix vocabulary, collection, delivery in one quest
- **Dialogue states** - NPCs respond differently based on quest progress
- **Reputation system** - Actions affect standing with factions/locations

---

## Technical Decisions

### Quest State Machine
Quests flow through states:
```
locked → available → active → completed
                  ↘ failed (for timed quests)
```

### Separation of Data and Logic
- `gamedata.js` - Quest definitions (pure data)
- `questSystem.js` - Quest logic (state management, completion checks)
- `game.js` - UI rendering and user interaction

This separation means adding new quests is just adding data, not code.

---

## What Clicked

The moment an NPC gave a quest, I accepted it, completed a lesson, and saw "Quest Complete!" with rewards... that's when the loop felt real.

**The core loop emerged:**
1. Talk to NPC
2. Accept quest
3. Do lesson
4. Get rewards
5. Unlock new quests
6. Repeat

---

## How It Felt

[Your memories]

- How did it feel when NPCs started working?
- Was the quest system hard to design?
- Any quests you're particularly proud of?

---

## End of Entry

*The world has people now. They have things to say.*
